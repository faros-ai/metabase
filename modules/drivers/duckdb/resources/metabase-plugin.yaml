# This driver is based on the community driver with minor modifications:
# https://github.com/AlexR2D2/metabase_duckdb_driver

info:
  name: Metabase DuckDB Driver
  version: 0.0.1
  description: Allows Metabase to connect to DuckDB databases
contact-info:
  name: Faros AI
driver:
  name: duckdb
  display-name: DuckDB
  lazy-load: true
  parent: sql-jdbc
  connection-properties:
    - name: database_file
      display-name: Database file
      placeholder: /tmp/database.db
      required: true
      type: string
    - name: additional_database_files
      display-name: Additional database files
      description: >-
        Additional databases to attach to the catalog. This should be a comma
        separated list of database filepaths. Each database may optionally be
        assigned an alias by appending its filepath with '::' followed by the
        alias, e.g., /tmp/database.db::my_alias.
      placeholder: /tmp/database1.db, /tmp/database2.db::my_alias
      required: false
      type: string
    - name: read_only
      display-name: Establish a read-only connection
      default: true
      type: boolean
    - advanced-options-start
    - name: memory_limit
      display-name: Memory limit
      placeholder: 8GB
      required: false
      type: string
      visible-if:
        advanced-options: true
    - name: temp_directory
      display-name: Temporary directory
      placeholder: /tmp/data.db.tmp
      required: false
      type: string
      visible-if:
        advanced-options: true
    - default-advanced-options
init:
  - step: load-namespace
    namespace: metabase.driver.duckdb
  - step: register-jdbc-driver
    class: org.duckdb.DuckDBDriver
